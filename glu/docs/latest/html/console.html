

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Console &mdash; glu v4.1.0 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="glu v4.1.0 documentation" href="index.html" />
    <link rel="next" title="Production Setup" href="production-setup.html" />
    <link rel="prev" title="Filtering" href="filtering.html" />
 
<link rel="stylesheet" href="_static/glu.css" type="text/css" />
<script type="text/javascript" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8362808-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="contents.html">
            <img class="logo" src="_static/glu-logo-214x72.png" alt="Logo"/>
          </a></p>
        <h1><a href="contents.html">glu v4.1.0 documentation</a></h1>
        <div class="rel">
          <a href="filtering.html" title="Filtering"
             accesskey="P">previous</a> |
          <a href="production-setup.html" title="Production Setup"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

<div class="content-wrapper">
<div class="content">
<div class="document">
  
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="console-logo-console">
<h1><img alt="console logo" class="header-logo" src="_images/console-logo-86.png" /> Console<a class="headerlink" href="#console-logo-console" title="Permalink to this headline">¶</a></h1>
<p>The glu console is a web application that offers a graphical presentation on top of the <a class="reference internal" href="orchestration-engine.html"><em>orchestration engine</em></a>.</p>
<div class="section" id="console-in-action">
<h2>Console in action<a class="headerlink" href="#console-in-action" title="Permalink to this headline">¶</a></h2>
<p>The best way to get a feel of what the console looks like and what can be achieved, take a look at the <a class="reference internal" href="tutorial.html"><em>tutorial</em></a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Check the section <a class="reference internal" href="production-setup.html#production-setup-console"><em>Step 8: Install the console</em></a> for details about how to install the console.</p>
</div>
<div class="section" id="configuration-file">
<span id="console-configuration"></span><h2>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>When the console boots it reads a configuration file. There are 3 ways to provide this configuration file to the console:</p>
<ol class="arabic simple">
<li>store it under <tt class="docutils literal"><span class="pre">$HOME/.org.linkedin.glu/glu-console-webapp.groovy</span></tt></li>
<li>store it under <tt class="docutils literal"><span class="pre">conf/glu-console-webapp.groovy</span></tt> (relative to wherever the VM <tt class="docutils literal"><span class="pre">user.dir</span></tt> is set to)</li>
<li>pass a system property <tt class="docutils literal"><span class="pre">-Dorg.linkedin.glu.console.config.location=/fullpath/to/file</span></tt></li>
</ol>
<p>Through this file, the console allows you to configure several areas including some aspects of the UI.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">if you modify the configuration file, you need to stop and restart the console for the changes to take effect</p>
</div>
<div class="section" id="console-agent-connection">
<h3>Console &lt;-&gt; Agent Connection<a class="headerlink" href="#console-agent-connection" title="Permalink to this headline">¶</a></h3>
<p>The console (orchestration engine) talks to all the agents using a REST api over https (or http if you do disable security).</p>
<p>The following section allows you to configure how the console talks to the agent:</p>
<div class="highlight-text"><div class="highlight"><pre>console.sslEnabled=true

def keysDir = System.properties[&#39;org.linkedin.glu.console.keys.dir&#39;] ?:
              &quot;${System.properties[&#39;user.dir&#39;]}/keys&quot;

console.keystorePath=&quot;${keysDir}/console.keystore&quot;
console.keystorePassword = &quot;nacEn92x8-1&quot;
console.keyPassword = &quot;nWVxpMg6Tkv&quot;

console.secretkeystorePath=&quot;${keysDir}/console.secretkeystore&quot;

console.truststorePath=&quot;${keysDir}/agent.truststore&quot;
console.truststorePassword = &quot;nacEn92x8-1&quot;
</pre></div>
</div>
<p>TODO: add link to key management.</p>
<p>If you do not want a secure connection between the console and the agent, this is how you would configure it:</p>
<div class="highlight-text"><div class="highlight"><pre>console.sslEnabled=false

// the following entries *must* be present (but can be left empty)
console.keystorePath=&quot;&quot;
console.keystorePassword = &quot;&quot;
console.keyPassword = &quot;&quot;
console.secretkeystorePath=&quot;&quot;
console.truststorePath=&quot;&quot;
console.truststorePassword = &quot;&quot;
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Disabling the secure connection means that the agents will happily serve any request irrelevant of where it is coming from, which could be a serious security hole.</p>
</div>
</div>
<div class="section" id="plugins">
<h3>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h3>
<p>The console (orchestration engine) behavior can be tweaked and or enhanced with the use of plugins. Check the <a class="reference internal" href="orchestration-engine.html#goe-plugins"><em>Plugins</em></a> section for details on how to create and install a plugin. You add your plugin(s) to the console by modifying the following property:</p>
<div class="highlight-text"><div class="highlight"><pre>orchestration.engine.plugins = [
  &#39;org.linkedin.glu.orchestration.engine.plugins.builtin.StreamFileContentPlugin&#39;,
  &#39;org.acme.MyPlugin&#39;,
  // etc...
]
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Since 4.1.0, <em>restricting file access on an agent</em> has been migrated to the <tt class="docutils literal"><span class="pre">StreamFileContentPlugin</span></tt> plugin and is now being configured by defining the
properties:</p>
<div class="last highlight-text"><div class="highlight"><pre>// path to the root of the unrestricted location (empty means no restriction)
// this property is used by StreamFileContentPlugin
plugins.StreamFileContentPlugin.unrestrictedLocation = &quot;/export/content/glu&quot;

// role for unrestricted
plugins.StreamFileContentPlugin.unrestrictedRole = &#39;ADMIN&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<p>The console uses a database to store some of its data (like the audit log, user information, etc...). At this moment in time, the console uses <a class="reference external" href="http://hsqldb.org/">HSQLDB</a> for its database. You may want to change the location of the database folder by providing a <tt class="docutils literal"><span class="pre">org.linkedin.glu.console.dataSource.url</span></tt> system property (<tt class="docutils literal"><span class="pre">-Dorg.linkedin.glu.console.dataSource.url=/path/to/database/root</span></tt> when starting the webapp container) or directly modifying the following section in the configuration file:</p>
<div class="highlight-text"><div class="highlight"><pre>def dataSourceUrl =
  System.properties[&#39;org.linkedin.glu.console.dataSource.url&#39;] ?:
  &quot;jdbc:hsqldb:file:${System.properties[&#39;user.dir&#39;]}/database/prod;shutdown=true&quot;

// specify the database connection string
dataSource.dbCreate = &quot;update&quot;
dataSource.url = dataSourceUrl
</pre></div>
</div>
<div class="section" id="example-for-a-different-database-mysql">
<span id="console-configuration-database-mysql"></span><h4>Example for a different database: MySql<a class="headerlink" href="#example-for-a-different-database-mysql" title="Permalink to this headline">¶</a></h4>
<p>Here are the steps to follow in order to use MySql instead of HSQLDB (the steps would be very similar for a different database!)</p>
<ul>
<li><p class="first">Download and install MySql on your system (don&#8217;t forget to start it!)</p>
</li>
<li><p class="first">Connect to MySql and create the <tt class="docutils literal"><span class="pre">glu</span></tt> user:</p>
<div class="highlight-text"><div class="highlight"><pre>sudo /usr/local/mysql/bin/mysql
mysql&gt; create database glu;
mysql&gt; show databases;
mysql&gt; create user &#39;glua&#39;@&#39;localhost&#39; identified by &#39;password&#39;;
mysql&gt; grant all on glu.* to &#39;glua&#39;@&#39;localhost&#39;;
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This values are obviously just example values (they simply need to be plugged in the right place in the configuration file (see below)).</p>
</div>
</li>
<li><p class="first">Download the MySql <a class="reference external" href="http://www.mysql.com/downloads/connector/j/">driver</a></p>
</li>
<li><p class="first">Copy the driver (in this example it is called <tt class="docutils literal"><span class="pre">mysql-connector-java-5.1.17-bin.jar</span></tt>) to <tt class="docutils literal"><span class="pre">console-server/jetty-distribution-7.2.2.v20101205/lib/ext</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may need to run <tt class="docutils literal"><span class="pre">./bin/tutorial.sh</span> <span class="pre">setup</span></tt> in order to create the proper folder structure first!</p>
</div>
</li>
<li><p class="first">Edit the glu configuration file (<tt class="docutils literal"><span class="pre">console-server/conf/glu-console-webapp.groovy</span></tt>) to input the proper values:</p>
<div class="highlight-text"><div class="highlight"><pre>// &#39;glu&#39; is the name of the database created previously
def dataSourceUrl = &quot;jdbc:mysql://localhost/glu&quot;
dataSource.dbCreate = &quot;update&quot;
dataSource.url = dataSourceUrl
dataSource.logSql=false // set to true for details (+ open trace logging level)
dataSource.dialect = &quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;
dataSource.driverClassName = &quot;com.mysql.jdbc.Driver&quot;
dataSource.username= &quot;glua&quot; // user created previously
dataSource.password = &quot;password&quot; // password assigned previously
</pre></div>
</div>
</li>
<li><p class="first">Start the console</p>
</li>
<li><p class="first">You can check that MySql is being used:</p>
<div class="highlight-text"><div class="highlight"><pre>mysql&gt; use glu;
mysql&gt; show tables;
+---------------------+
| Tables_in_glu       |
+---------------------+
| audit_log           |
| db_current_system   |
| db_deployment       |
| db_system_model     |
| db_user_credentials |
| fabric              |
| role                |
| user                |
| user_permissions    |
| user_role           |
+---------------------+
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>The log4j section allows you to configure where and how the console logs its output. It is a DSL and you can view more details on how to configure it directly on the <a class="reference external" href="http://grails.org/doc/1.3.x/guide/3.%20Configuration.html#3.1.2%20Logging">grails web site</a>:</p>
<div class="highlight-text"><div class="highlight"><pre>log4j = {
    appenders {
      file name:&#39;file&#39;,
      file:&#39;logs/console.log&#39;,
      layout:pattern(conversionPattern: &#39;%d{yyyy/MM/dd HH:mm:ss.SSS} %p [%c{1}] %m%n&#39;)
    }

    root {
      info &#39;file&#39;
      additivity = false
    }

    error  &#39;org.codehaus.groovy.grails.web.servlet&#39;,  //  controllers
               &#39;org.codehaus.groovy.grails.web.pages&#39;, //  GSP
               &#39;org.codehaus.groovy.grails.web.sitemesh&#39;, //  layouts
               &#39;org.codehaus.groovy.grails.web.mapping.filter&#39;, // URL mapping
               &#39;org.codehaus.groovy.grails.web.mapping&#39;, // URL mapping
               &#39;org.codehaus.groovy.grails.commons&#39;, // core / classloading
               &#39;org.codehaus.groovy.grails.plugins&#39;, // plugins
               &#39;org.codehaus.groovy.grails.orm.hibernate&#39;, // hibernate integration
               &#39;org.springframework&#39;,
               &#39;org.hibernate&#39;

    info &#39;grails&#39;,
         &#39;org.linkedin&#39;

    //debug &#39;com.linkedin.glu.agent.tracker&#39;, &#39;com.linkedin.glu.zookeeper.client&#39;

    //trace &#39;org.hibernate.SQL&#39;, &#39;org.hibernate.type&#39;

    warn   &#39;org.mortbay.log&#39;, &#39;org.restlet.Component.LogService&#39;, &#39;org.restlet&#39;
}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This has nothing to do with the audit log!</p>
</div>
</div>
<div class="section" id="ldap">
<span id="console-configuration-ldap"></span><h3>LDAP<a class="headerlink" href="#ldap" title="Permalink to this headline">¶</a></h3>
<p>You can configure LDAP for handling user management in the console. See <a class="reference internal" href="#console-user-management"><em>User management</em></a> for details. Here is the relevant section in the configuration file:</p>
<div class="highlight-text"><div class="highlight"><pre>// This section is optional if you do not want to use ldap
ldap.server.url=&quot;ldaps://ldap.acme.com:3269&quot;
ldap.search.base=&quot;dc=acme,dc=com&quot;
ldap.search.user=&quot;cn=glu,ou=glu,dc=acme,dc=com&quot;
ldap.search.pass=&quot;helloworld&quot;
ldap.username.attribute=&quot;sAMAccountName&quot;
</pre></div>
</div>
</div>
<div class="section" id="tuning">
<h3>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">¶</a></h3>
<div class="section" id="deployments-auto-archive">
<h4>Deployments auto-archive<a class="headerlink" href="#deployments-auto-archive" title="Permalink to this headline">¶</a></h4>
<p>The plans page displays the list of deployments that have happened recently. Since 3.3.0, items in this list are automatically archived after 30 minutes. You can tune this property or simply disable automatic archiving by adding the following property:</p>
<div class="highlight-text"><div class="highlight"><pre>// set it to &quot;0&quot; if you want to disable auto archiving entirely
console.deploymentService.autoArchiveTimeout = &quot;30m&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="ui-configuration">
<h3>UI configuration<a class="headerlink" href="#ui-configuration" title="Permalink to this headline">¶</a></h3>
<p>The UI is configured in the <tt class="docutils literal"><span class="pre">console.defaults</span></tt> section of the configuration file. It is a simple map:</p>
<div class="highlight-text"><div class="highlight"><pre>console.defaults =
[
  ... configuration goes here ...
]
</pre></div>
</div>
<div class="section" id="custom-css">
<span id="console-configuration-custom-css"></span><h4>Custom Css<a class="headerlink" href="#custom-css" title="Permalink to this headline">¶</a></h4>
<p>If you want to customize the look and feel of the console and override or tweak any css value, you can provide your own custom css. Possible values are <tt class="docutils literal"><span class="pre">null</span></tt> (or simply non existent), <tt class="docutils literal"><span class="pre">String</span></tt> or <tt class="docutils literal"><span class="pre">URI</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>// no custom css
customCss: null

// as a String (using groovy &quot;&quot;&quot; notation makes it convenient)
customCss: &quot;&quot;&quot;
  .OK {
    background: green;
  }
&quot;&quot;&quot;

// as a URI (for security reasons should be local!)
customCss: new URI(&quot;/glu/repository/css/custom.css&quot;)
</pre></div>
</div>
</div>
<div class="section" id="default-dashboard">
<h4>Default Dashboard<a class="headerlink" href="#default-dashboard" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="#console-default-dashboard"><em>section</em></a> on how to configure the <tt class="docutils literal"><span class="pre">dashboard</span></tt> section of the configuration file.</p>
</div>
<div class="section" id="tags">
<h4>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h4>
<p>You can specify the colors of each tag (foreground and background):</p>
<div class="highlight-text"><div class="highlight"><pre>tags:
[
  &#39;__default__&#39;: [background: &#39;#005a87&#39;, color: &#39;#ffffff&#39;],
  &#39;webapp&#39;: [background: &#39;#ec7000&#39;, color: &#39;#fff0e1&#39;],
  &#39;frontend&#39;: [background: &#39;#006633&#39;, color: &#39;#f1f5ec&#39;],
  &#39;backend&#39;: [background: &#39;#5229a3&#39;, color: &#39;#e0d5f9&#39;],
],
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <tt class="docutils literal"><span class="pre">__default__</span></tt> entry is optional and specify the color of the tags that are not specifically defined</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the color value (ex: <tt class="docutils literal"><span class="pre">#005a87</span></tt>) ends up being used in css so you can use whatever is legal in css (ex: <tt class="docutils literal"><span class="pre">red</span></tt>)</p>
</div>
</div>
<div class="section" id="model">
<h4>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h4>
<p>The model page displays a summary and the columns are configurable in the following section:</p>
<div class="highlight-text"><div class="highlight"><pre>model:
[
   agent: [name: &#39;agent&#39;],
  &#39;tags.webapp&#39;: [name: &#39;webapp&#39;],
   &#39;metadata.container.name&#39;: [name: &#39;container&#39;],
   &#39;metadata.product&#39;: [name: &#39;product&#39;],
   &#39;metadata.version&#39;: [name: &#39;version&#39;],
   &#39;metadata.cluster&#39;: [name: &#39;cluster&#39;]
]
</pre></div>
</div>
<p>This configuration results in the following output:</p>
<img alt="Model display configuration" class="align-center" src="_images/configuration-system-600.png" />
<p><tt class="docutils literal"><span class="pre">model</span></tt> is a map with the following convention:</p>
<ul class="simple">
<li>the key represent the <a class="reference internal" href="glossary.html#term-dotted-notation"><em class="xref std std-term">dotted notation</em></a> of an entry (see: <a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a> for more details and examples on the dotted notation)</li>
<li>the value is a map with (currently) one entry only: <tt class="docutils literal"><span class="pre">name</span></tt> which represents the (display) name of the column</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since 3.3.0, it takes effect only when showing a single model: for performance reasons the page which shows the list of models no longer fetches the model and as such cannot display this information</p>
</div>
</div>
<div class="section" id="non-editable-model">
<span id="console-configuration-non-editable-model"></span><h4>Non Editable Model<a class="headerlink" href="#non-editable-model" title="Permalink to this headline">¶</a></h4>
<p>You can enable or disable the fact that a system model is editable or not by changing the following property:</p>
<div class="highlight-text"><div class="highlight"><pre>disableModelUpdate: false,
</pre></div>
</div>
<p>By default, the model is editable which means that there is a <tt class="docutils literal"><span class="pre">Save</span> <span class="pre">Changes</span></tt> button and the text area containing the body is editable. Changing this value to <tt class="docutils literal"><span class="pre">true</span></tt> removes the button and makes the text area non editable anymore.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if the model is not editable, it is always possible to <em>load</em> a new one by going to the <tt class="docutils literal"><span class="pre">Model</span></tt> tab. The idea behind this feature is to enforce the fact that the model should be properly versioned outside of glu and changing it should go through a proper flow that is beyond the scope of glu.</p>
</div>
</div>
<div class="section" id="shortcut-filters">
<h4>Shortcut Filters<a class="headerlink" href="#shortcut-filters" title="Permalink to this headline">¶</a></h4>
<p>This entry allows you to define a dropdown that will be populated based on the model metadata in order to quickly set a filter. In the screenshot below, clicking on <tt class="docutils literal"><span class="pre">'product2:2.0.0'</span></tt> in the dropdown is equivalent to removing the current filter on <tt class="docutils literal"><span class="pre">product1</span></tt> and adding a new one for <tt class="docutils literal"><span class="pre">product2</span></tt> simplifying going back and forth between globally used concepts (like teams or product lines or zones, etc...):</p>
<div class="highlight-text"><div class="highlight"><pre>shortcutFilters:
[
    [
        name: &#39;product&#39;,
        source: &#39;metadata.product&#39;,
        header: [&#39;version&#39;]
    ]
]
</pre></div>
</div>
<p>This configuration results in the following output:</p>
<img alt="Shortcut filters" class="align-center" src="_images/shortcut-filters.png" />
<p>The format of this entry is an array of maps (so you can have more than one!) where each map consists of:</p>
<ul class="simple">
<li>a <tt class="docutils literal"><span class="pre">name</span></tt> entry which will be displayed in the dropdown when no filter entry is selected <tt class="docutils literal"><span class="pre">All</span> <span class="pre">[&lt;name&gt;]</span></tt></li>
<li>a <tt class="docutils literal"><span class="pre">source</span></tt> which represents a <a class="reference internal" href="glossary.html#term-dotted-notation"><em class="xref std std-term">dotted notation</em></a> of which data to use in the model. The data in the model should have the following structure:<ul>
<li>the key is the value of the filter</li>
<li>the value is another map with the following convention:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the display name of the value (in this example they are the same!)</li>
<li>other entries that are used in the <tt class="docutils literal"><span class="pre">header</span></tt> section (see below)</li>
</ul>
</li>
</ul>
</li>
<li>a <tt class="docutils literal"><span class="pre">header</span></tt> entry which is an array for extra information referring to entries in the metadata (see above)</li>
</ul>
<p>Example of model which produces the previous screen:</p>
<div class="highlight-text"><div class="highlight"><pre>&quot;metadata&quot;: {
  &quot;product&quot;: { &lt;================ value as defined in the model section (name: &#39;product&#39;)
    &quot;product1&quot;: { &lt;============= first entry (value for the filter!)
      &quot;name&quot;: &quot;product1&quot;, &lt;===== display name of the value
      &quot;version&quot;: &quot;1.0.0&quot;  &lt;===== extra info as defined in the model section (header: [&#39;version&#39;])
    },
    &quot;product2&quot;: { &lt;============= second entry (value for the filter!)
      &quot;name&quot;: &quot;product2&quot;, &lt;===== display name of the value
      &quot;version&quot;: &quot;2.0.0&quot;  &lt;===== extra info as defined in the model section (header: [&#39;version&#39;])
    }
  }
}
</pre></div>
</div>
</div>
<div class="section" id="header">
<h4>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h4>
<p>This entry allows you to add more information to the header in the console:</p>
<div class="highlight-text"><div class="highlight"><pre>header:
[
    metadata: [&#39;drMode&#39;]
]
</pre></div>
</div>
<p>This entry simply contains a <tt class="docutils literal"><span class="pre">metadata</span></tt> section which is an array of keys in the <a class="reference internal" href="glossary.html#term-metadata"><em class="xref std std-term">metadata</em></a> of the model (<strong>not</strong> of an entry).</p>
<p>Example of model:</p>
<div class="highlight-text"><div class="highlight"><pre> &quot;metadata&quot;: {
   &quot;product&quot;: {...},
   &quot;drMode&quot;: &quot;primary&quot;
}
</pre></div>
</div>
<p>The previous model and <tt class="docutils literal"><span class="pre">header</span></tt> configuration produce the following output:</p>
<img alt="Header configuration" class="align-center" src="_images/configuration-header.png" />
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Since every fabric has its own model, hence its own <tt class="docutils literal"><span class="pre">metadata</span></tt> section, this feature is a convenient way to display fabric specific information. In this example we can display which fabric represents the primary data center versus which one represents the secondary data center.</p>
</div>
</div>
<div class="section" id="dashboard-agent-links">
<h4>Dashboard Agent Links<a class="headerlink" href="#dashboard-agent-links" title="Permalink to this headline">¶</a></h4>
<p>By default (new since 4.0.0), a link to an agent name in the dashboard has the same effect as all other links on the dashboard: it adds a filter. In this case it filters the model to see only the entries on this specific agent. The top level <tt class="docutils literal"><span class="pre">'Agents'</span></tt> tab allows you to navigate to the agent view. If you want to turn this off (thus reverting to the behavior prior to 4.0.0) use this entry (<tt class="docutils literal"><span class="pre">dashboard</span></tt> section of the configuration file):</p>
<div class="highlight-text"><div class="highlight"><pre>dashboardAgentLinksToAgent: true
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="dashboard">
<span id="console-dashboard"></span><h2>Dashboard<a class="headerlink" href="#dashboard" title="Permalink to this headline">¶</a></h2>
<p>The dashboard is the main entry point of the console and is a visual representation of the <a class="reference internal" href="orchestration-engine.html#goe-delta"><em>delta</em></a>.</p>
<img alt="Console dashboard" class="align-center" src="_images/console-dashboard-600.png" />
<div class="section" id="customization">
<span id="console-dashboard-customization"></span><h3>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h3>
<p>Since 4.0.0, the dashboard can be customized by every user the way they see fit. Every user can also define as many <cite>dashboards</cite> as they want and the dropdown allows to switch between dashboard quickly.</p>
<img alt="Console dashboard" class="align-center" src="_images/console-dashboard-switch.png" />
<p>The easier way to create a new dashboard is to add filters and group by columns (by clicking on a column name) and then select <tt class="docutils literal"><span class="pre">'Save</span> <span class="pre">as</span> <span class="pre">new'</span></tt>. The new dashboard can then be further customized by clicking on the <tt class="docutils literal"><span class="pre">'Customize'</span></tt> subtab which shows the definition of the dashboard as a json document:</p>
<div class="highlight-text"><div class="highlight"><pre>{
  &quot;columnsDefinition&quot;: [
    {
      &quot;groupBy&quot;: &quot;uniqueCountOrUniqueVal&quot;,
      &quot;linkable&quot;: true,
      &quot;name&quot;: &quot;cluster&quot;,
      &quot;orderBy&quot;: &quot;asc&quot;,
      &quot;source&quot;: &quot;metadata.cluster&quot;,
      &quot;visible&quot;: true
    },
   ... etc ...
 ],
  &quot;customFilter&quot;: &quot;metadata.cluster=&#39;c1&#39;&quot;,
  &quot;errorsOnly&quot;: false,
  &quot;name&quot;: &quot;c1 cluster&quot;,
  &quot;summary&quot;: false
}
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt>: the name of the dashboard (will be displayed in the dropdown)</li>
<li><tt class="docutils literal"><span class="pre">errorsOnly</span></tt>: to display only rows that are in error</li>
<li><tt class="docutils literal"><span class="pre">summary</span></tt>: to display a summary view when there are more than one row with the same value (based on the first column). When this value is set to <tt class="docutils literal"><span class="pre">true</span></tt> then the <tt class="docutils literal"><span class="pre">groupBy</span></tt> entry of a column definition kicks in</li>
<li><tt class="docutils literal"><span class="pre">columnsDefinition</span></tt> is an array which defines each column. The order in the array defines in which order columns will be displayed so it is easy to move columns around by simply moving them in the array. Each column is defined this way:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt>: the name of the column as it appears in the dashboard</li>
<li><tt class="docutils literal"><span class="pre">source</span></tt>: which data in the model needs to be displayed using the <a class="reference internal" href="glossary.html#term-dotted-notation"><em class="xref std std-term">dotted notation</em></a> (see: <a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a> for more details and examples on the dotted notation)</li>
<li><tt class="docutils literal"><span class="pre">orderBy</span></tt>: how to sort the column. Possible values are: <tt class="docutils literal"><span class="pre">asc</span> <span class="pre">/</span> <span class="pre">desc</span> <span class="pre">/</span> <span class="pre">null</span></tt> (<tt class="docutils literal"><span class="pre">null</span></tt> means ignore for sorting purposes)</li>
<li><tt class="docutils literal"><span class="pre">groupBy</span></tt>: how to group rows when using a <tt class="docutils literal"><span class="pre">summary</span></tt> view. Possible values are: <tt class="docutils literal"><span class="pre">uniqueVals</span> <span class="pre">/</span> <span class="pre">uniqueCount</span> <span class="pre">/</span> <span class="pre">uniqueCountOrUniqueVal</span> <span class="pre">/</span> <span class="pre">vals</span> <span class="pre">/</span> <span class="pre">count</span> <span class="pre">/</span> <span class="pre">min</span> <span class="pre">/</span> <span class="pre">max</span></tt></li>
<li><tt class="docutils literal"><span class="pre">linkable</span></tt>: whether a link to add a filter should be displayed</li>
<li><tt class="docutils literal"><span class="pre">visible</span></tt>: whether the column should be visible at all (useful mostly internally for derived values)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="console-default-dashboard">
<span id="id1"></span><h3>Default Dashboard<a class="headerlink" href="#console-default-dashboard" title="Permalink to this headline">¶</a></h3>
<p>When a user logs in the first time it is assigned a <cite>default</cite> dashboard. This dashboard is defined in the configuration file under the <tt class="docutils literal"><span class="pre">defaults.dashboard</span></tt> section and can be a json string or a simple groovy array of <tt class="docutils literal"><span class="pre">columnsDefinition</span></tt> as defined previously. This is the one that comes by default:</p>
<div class="highlight-text"><div class="highlight"><pre>dashboard:
[
  [ name: &quot;mountPoint&quot;, source: &quot;mountPoint&quot; ],
  [ name: &quot;agent&quot;,      source: &quot;agent&quot;],
  [ name: &quot;tags&quot;,       source: &quot;tags&quot;,       groupBy: &quot;uniqueVals&quot;],
  [ name: &quot;container&quot;,  source: &quot;metadata.container.name&quot;],
  [ name: &quot;version&quot;,    source: &quot;metadata.version&quot;],
  [ name: &quot;product&quot;,    source: &quot;metadata.product&quot;],
  [ name: &quot;cluster&quot;,    source: &quot;metadata.cluster&quot;],
  [ name: &quot;status&quot;,     source: &quot;status&quot; ],
  [ name: &quot;statusInfo&quot;, source: &quot;statusInfo&quot;, groupBy: &quot;vals&quot;, visible: false],
  [ name: &quot;state&quot;,      source: &quot;state&quot;,                       visible: false]
]
</pre></div>
</div>
</div>
</div>
<div class="section" id="log-files-display">
<span id="console-script-log-files"></span><h2>Log Files Display<a class="headerlink" href="#log-files-display" title="Permalink to this headline">¶</a></h2>
<p>When looking at an agent (agents view page), for each entry, there may be a log section determined by the fields declared in the script:</p>
<img alt="Script log files" class="align-center" src="_images/console-script-log-files.png" />
<p>In order to see an entry like this you can do the following in your script:</p>
<ul class="simple">
<li>declare any field which ends in <tt class="docutils literal"><span class="pre">Log</span></tt> (ex: <tt class="docutils literal"><span class="pre">serverLog</span></tt>)</li>
<li>declare a field called <tt class="docutils literal"><span class="pre">logsDir</span></tt> (pointing to a folder) which will display the <tt class="docutils literal"><span class="pre">more...</span></tt> link</li>
<li>declare a field called <tt class="docutils literal"><span class="pre">logs</span></tt> and of type <tt class="docutils literal"><span class="pre">Map</span></tt> where each entry will point to a log file</li>
</ul>
<p>Example of glu script:</p>
<div class="highlight-text"><div class="highlight"><pre>class GluScriptWithLogs
{
  def logsDir
  def serverLog
  def logs = [:]

  def install = {
    logsDir = shell.toResource(&quot;${mountPoint}/logs&quot;)
    serverLog = logsDir.&quot;server.log&quot; // using field with name ending in Log
    logs.gc = logsDir.&quot;gc.log&quot; // using logs map
  }
}
</pre></div>
</div>
</div>
<div class="section" id="first-bootstrap">
<h2>First bootstrap<a class="headerlink" href="#first-bootstrap" title="Permalink to this headline">¶</a></h2>
<p>The very first time the console is started, it will create an admin user. Log in as this user:</p>
<div class="highlight-text"><div class="highlight"><pre>username: admin
password: admin
</pre></div>
</div>
<p>Then click on the <tt class="docutils literal"><span class="pre">'admin'</span></tt> tab (not the one called <tt class="docutils literal"><span class="pre">'Admin'</span></tt>) and click <tt class="docutils literal"><span class="pre">'Manage</span> <span class="pre">your</span> <span class="pre">credentials'</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is strongly recommended you immediately change the admin password!</p>
</div>
</div>
<div class="section" id="user-management">
<span id="console-user-management"></span><h2>User management<a class="headerlink" href="#user-management" title="Permalink to this headline">¶</a></h2>
<p>There are 2 ways to manage users.</p>
<div class="section" id="id2">
<h3>LDAP<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>If you define an ldap section in the configuration file (see <a class="reference internal" href="#console-configuration-ldap"><em>configuration section</em></a> for details), then the console will automatically allow any user who has the correct ldap credentials to login. If the user has never logged in before, a new account will be automatically created and the user will have the role <tt class="docutils literal"><span class="pre">USER</span></tt> which gives him read access mostly (and limited access to log files). This allows any user to login to the console without any administrator intervention.</p>
</div>
<div class="section" id="manual-user-management">
<h3>Manual user management<a class="headerlink" href="#manual-user-management" title="Permalink to this headline">¶</a></h3>
<p>Whether you use LDAP or not you can always use this method. If you don&#8217;t use LDAP then it is your only choice. On the <tt class="docutils literal"><span class="pre">Admin</span></tt> tab, you can create a new user by giving it a user name and a password. You can also assign roles to a user:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Role</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">USER</span></tt></td>
<td>mostly read access (limited access to some log files (cannot go anywhere
on the filesystem))</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">RELEASE</span></tt></td>
<td>most of the traditional release actions (like starting and stopping
entries…)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">ADMIN</span></tt></td>
<td>administrative role (create user, assign roles…)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">RESTRICTED</span></tt></td>
<td>if you want to ban a user from the console</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No matter what the role the user in, actions taken are logged in the audit log that can be viewed from the <tt class="docutils literal"><span class="pre">Admin</span></tt> tab.</p>
</div>
</div>
<div class="section" id="password-management">
<h3>Password management<a class="headerlink" href="#password-management" title="Permalink to this headline">¶</a></h3>
<p>Even if you use LDAP, a user can assign himself a console password (useful if the password needs to be stored in scripts for example).</p>
</div>
<div class="section" id="console-tabs">
<h3>Console tabs<a class="headerlink" href="#console-tabs" title="Permalink to this headline">¶</a></h3>
<p>Documentation coming soon. In the meantime, take a look at the <a class="reference internal" href="tutorial.html"><em>tutorial</em></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
</div>
<div class="sidebar">
  <div class="sidebar-entry">
    <h3>Table Of Contents</h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">What is glu?</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">A taste of glu (tutorial)</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html"> Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="glu-script.html"> glu script</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration-engine.html"> Orchestration engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="static-model.html"> Static Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtering.html"> Filtering</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""> Console</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#console-in-action">Console in action</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#console-agent-connection">Console &lt;-&gt; Agent Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plugins">Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database">Database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-for-a-different-database-mysql">Example for a different database: MySql</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldap">LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tuning">Tuning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#deployments-auto-archive">Deployments auto-archive</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ui-configuration">UI configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#custom-css">Custom Css</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-dashboard">Default Dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#model">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#non-editable-model">Non Editable Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shortcut-filters">Shortcut Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#header">Header</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dashboard-agent-links">Dashboard Agent Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dashboard">Dashboard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#customization">Customization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#console-default-dashboard">Default Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#log-files-display">Log Files Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="#first-bootstrap">First bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-management">User management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-user-management">Manual user management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#password-management">Password management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#console-tabs">Console tabs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="production-setup.html">Production Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-setup.html">Development Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Latest changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html">All content</a></li>
</ul>

  </div>
<div class="sidebar-entry">
  <h3>Quick Links</h3>
  <ul class="quick-links">
    <li><a href="https://github.com/linkedin/glu/downloads">Download</a>
    <li><a href="tutorial.html">Tutorial</a>
    <li><a href="http://www.github.com/linkedin/glu">Source Code</a>
    <li><a href="http://glu.977617.n3.nabble.com/">Forum / Questions / Help</a>
    <li><a href="http://devops.com/2011/07/09/glu-deployment-automation-video/">Video (July 2011)</a>
    <li><a href="http://twitter.com/glutweets">Twitter</a>
    <li><a href="https://github.com/linkedin/glu/issues">Issues / Tasks</a>
    <li><a href="RELEASE.html">Latest Changes</a>
  </ul>
</div>
  <div class="sidebar-entry">
    <h3>Twitter</h3>
    <script type="text/javascript">
      new TWTR.Widget({
                        version: 2,
                        type: 'profile',
                        rpp: 4,
                        interval: 6000,
                        width: 'auto',
                        height: 300,
                        theme: {
                          shell: {
                            background: '#dddddd',
                            color: '#000000'
                          },
                          tweets: {
                            background: '#ffffff',
                            color: '#000000',
                            links: '#ce5c00'
                          }
                        },
                        features: {
                          scrollbar: false,
                          loop: false,
                          live: false,
                          hashtags: true,
                          timestamp: true,
                          avatars: true,
                          behavior: 'all'
                        }
                      }).render().setUser('glutweets').start();
    </script>
  </div>
</div>
<div class="clearer"></div>
</div>

</div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="filtering.html" title="Filtering"
             >previous</a> |
          <a href="production-setup.html" title="Production Setup"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011, Yan Pujante.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>